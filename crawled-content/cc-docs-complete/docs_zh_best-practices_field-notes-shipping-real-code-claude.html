<div class="fixed flex shadow-lg transition-opacity rounded-xl p-0.5 border bg-fd-muted text-fd-muted-foreground z-10 max-md:hidden xl:start-4 max-xl:end-4 pointer-events-none opacity-0" style="top:calc(var(--fd-banner-height) + var(--fd-tocnav-height) + var(--spacing) * 4)"><button type="button" aria-label="Collapse Sidebar" data-collapsed="false" class="inline-flex items-center justify-center text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground p-1.5 [&amp;_svg]:size-4.5 rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M9 3v18"></path></svg></button><button type="button" class="inline-flex items-center justify-center text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground p-1.5 [&amp;_svg]:size-4.5 rounded-lg" data-search="" aria-label="Open Search"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg></button></div><aside id="nd-sidebar" data-collapsed="false" class="fixed start-0 flex flex-col items-end top-(--fd-sidebar-top) bottom-(--fd-sidebar-margin) z-20 bg-fd-card text-sm border-e max-md:hidden *:w-(--fd-sidebar-width)" style="transition:top ease 250ms, opacity ease 250ms, translate ease 250ms, width ease 250ms;--fd-sidebar-offset:calc(16px - 100%);--fd-sidebar-margin:0px;--fd-sidebar-top:calc(var(--fd-banner-height) + var(--fd-nav-height) + var(--fd-sidebar-margin));width:calc(var(--fd-sidebar-width) + var(--fd-layout-offset))"><div class="flex flex-col gap-3 p-4 pb-2"><div class="flex"><a class="inline-flex text-[15px] items-center gap-2.5 font-medium me-auto" href="/"><svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" aria-label="Killer Code Logo"><circle cx="12" cy="12" r="12" fill="currentColor"></circle></svg>Killer Code</a><button type="button" aria-label="Collapse Sidebar" data-collapsed="false" class="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground p-1.5 [&amp;_svg]:size-4.5 mb-auto text-fd-muted-foreground"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M9 3v18"></path></svg></button></div><button type="button" data-search-full="" class="inline-flex items-center gap-2 rounded-lg border bg-fd-secondary/50 p-1.5 ps-2 text-sm text-fd-muted-foreground transition-colors hover:bg-fd-accent hover:text-fd-accent-foreground"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-4"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg>Search<div class="ms-auto inline-flex gap-0.5"><kbd class="rounded-md border bg-fd-background px-1.5">⌘</kbd><kbd class="rounded-md border bg-fd-background px-1.5">K</kbd></div></button></div><div dir="ltr" class="overflow-hidden h-full" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><div data-radix-scroll-area-viewport="" class="size-full rounded-[inherit] p-4" style="overflow: hidden scroll; --sidebar-item-offset: calc(var(--spacing) * 2); mask-image: linear-gradient(transparent, white 12px, white calc(100% - 12px), transparent);"><div style="min-width:100%;display:table"><a class="relative flex flex-row items-center gap-2 rounded-xl p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none" data-active="false" href="/docs">Best Practices</a><a href="https://github.com/foreveryh/claude-code-cookbook" rel="noreferrer noopener" target="_blank" class="relative flex flex-row items-center gap-2 rounded-xl p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none" data-active="false"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg>Cookbook</a><a href="https://claude.ai/code" rel="noreferrer noopener" target="_blank" class="relative flex flex-row items-center gap-2 rounded-xl p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none" data-active="false"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg>Official Docs</a><a href="https://www.anthropic.com/learn/build-with-claude" rel="noreferrer noopener" target="_blank" class="relative flex flex-row items-center gap-2 rounded-xl p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none" data-active="false"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg>Build with Claude</a><a href="https://x.com/Stephen4171127" rel="noreferrer noopener" target="_blank" class="relative flex flex-row items-center gap-2 rounded-xl p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none mb-4" data-active="false"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg>Author</a><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-xl p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none" href="/docs">首页</a><div data-state="closed"><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-xl p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none w-full" href="/docs/en">Claude Code Documentation<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide ms-auto transition-transform -rotate-90" data-icon="true"><path d="m6 9 6 6 6-6"></path></svg></a><div data-state="closed" id="radix-_R_l6j9flb_" hidden="" class="overflow-hidden data-[state=closed]:animate-fd-collapsible-up data-[state=open]:animate-fd-collapsible-down relative **:data-[active=true]:before:content-[''] **:data-[active=true]:before:bg-fd-primary **:data-[active=true]:before:absolute **:data-[active=true]:before:w-px **:data-[active=true]:before:inset-y-2.5 **:data-[active=true]:before:start-2.5" style="--sidebar-item-offset: calc(var(--spacing) * 6);"></div></div><div data-state="open"><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-xl p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none w-full" href="/docs/zh">Claude Code 文档中心<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide ms-auto transition-transform" data-icon="true"><path d="m6 9 6 6 6-6"></path></svg></a><div data-state="open" id="radix-_R_t6j9flb_" class="overflow-hidden data-[state=closed]:animate-fd-collapsible-up data-[state=open]:animate-fd-collapsible-down relative **:data-[active=true]:before:content-[''] **:data-[active=true]:before:bg-fd-primary **:data-[active=true]:before:absolute **:data-[active=true]:before:w-px **:data-[active=true]:before:inset-y-2.5 **:data-[active=true]:before:start-2.5" style="--sidebar-item-offset: calc(var(--spacing) * 6); transition-duration: 0s; animation-name: none; --radix-collapsible-content-height: 696px; --radix-collapsible-content-width: 254px;"><div class="absolute w-px inset-y-1 bg-fd-border start-2.5"></div><div data-state="closed"><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-xl p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none w-full" href="/docs/zh/advanced">高级<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide ms-auto transition-transform -rotate-90" data-icon="true"><path d="m6 9 6 6 6-6"></path></svg></a><div data-state="closed" id="radix-_R_1lt6j9flb_" hidden="" class="overflow-hidden data-[state=closed]:animate-fd-collapsible-up data-[state=open]:animate-fd-collapsible-down relative" style="--sidebar-item-offset: calc(var(--spacing) * 9);"></div></div><div data-state="open"><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-xl p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none w-full" href="/docs/zh/best-practices">最佳实践<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide ms-auto transition-transform" data-icon="true"><path d="m6 9 6 6 6-6"></path></svg></a><div data-state="open" id="radix-_R_2lt6j9flb_" class="overflow-hidden data-[state=closed]:animate-fd-collapsible-up data-[state=open]:animate-fd-collapsible-down relative" style="--sidebar-item-offset: calc(var(--spacing) * 9); transition-duration: 0s; animation-name: none; --radix-collapsible-content-height: 480px; --radix-collapsible-content-width: 254px;"><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-xl p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none" href="/docs/zh/best-practices/builder-claude-code">我如何使用 Claude Code（+ 我的最佳技巧）</a><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-xl p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none" href="/docs/zh/best-practices/cal-rueb-claude-code-best-practices">Cal Rueb 的 Claude Code 最佳实践</a><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-xl p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none" href="/docs/zh/best-practices/claude-code-best-practices">Claude Code 最佳实践</a><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-xl p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none" href="/docs/zh/best-practices/claude-code-is-my-computer">Claude Code 就是我的电脑</a><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-xl p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none" href="/docs/zh/best-practices/claude-code-setup-tips">掌握 Claude Code 的 33 个必知设置技巧</a><a data-active="true" class="relative flex flex-row items-center gap-2 rounded-xl p-2 ps-(--sidebar-item-offset) text-start [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-fd-primary/10 text-fd-primary" href="/docs/zh/best-practices/field-notes-shipping-real-code-claude">使用 Claude 生产真实代码的实战笔记</a><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-xl p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none" href="/docs/zh/best-practices/how-i-use-claude-code">我如何使用 Claude Code</a><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-xl p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none" href="/docs/zh/best-practices/karpathy-llm-coding-evolution">Andrej Karpathy 谈 LLM 辅助编程的演进：哲学与实践的融合</a><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-xl p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none" href="/docs/zh/best-practices/onevcat-claude-code-experience">一个半月高强度 Claude Code 使用后感受</a><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-xl p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none" href="/docs/zh/best-practices/six-weeks-of-claude-code">使用 Claude Code 的六周回顾</a></div></div><div data-state="closed"><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-xl p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none w-full" href="/docs/zh/community-tips">社区技巧<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide ms-auto transition-transform -rotate-90" data-icon="true"><path d="m6 9 6 6 6-6"></path></svg></a><div data-state="closed" id="radix-_R_3lt6j9flb_" hidden="" class="overflow-hidden data-[state=closed]:animate-fd-collapsible-up data-[state=open]:animate-fd-collapsible-down relative" style="--sidebar-item-offset: calc(var(--spacing) * 9);"></div></div><div data-state="closed"><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-xl p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none w-full" href="/docs/zh/cursor">Cursor<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide ms-auto transition-transform -rotate-90" data-icon="true"><path d="m6 9 6 6 6-6"></path></svg></a><div data-state="closed" id="radix-_R_4lt6j9flb_" hidden="" class="overflow-hidden data-[state=closed]:animate-fd-collapsible-up data-[state=open]:animate-fd-collapsible-down relative" style="--sidebar-item-offset: calc(var(--spacing) * 9);"></div></div><div data-state="closed"><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-xl p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none w-full" href="/docs/zh/sub-agents">子代理<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide ms-auto transition-transform -rotate-90" data-icon="true"><path d="m6 9 6 6 6-6"></path></svg></a><div data-state="closed" id="radix-_R_5lt6j9flb_" hidden="" class="overflow-hidden data-[state=closed]:animate-fd-collapsible-up data-[state=open]:animate-fd-collapsible-down relative" style="--sidebar-item-offset: calc(var(--spacing) * 9);"></div></div><div data-state="closed"><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-xl p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none w-full" href="/docs/zh/tools">工具<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide ms-auto transition-transform -rotate-90" data-icon="true"><path d="m6 9 6 6 6-6"></path></svg></a><div data-state="closed" id="radix-_R_6lt6j9flb_" hidden="" class="overflow-hidden data-[state=closed]:animate-fd-collapsible-up data-[state=open]:animate-fd-collapsible-down relative" style="--sidebar-item-offset: calc(var(--spacing) * 9);"></div></div></div></div></div></div></div><div data-fd-if-empty="_R_3j9flb_" class="flex flex-col border-t px-4 py-3"><div class="flex text-fd-muted-foreground items-center justify-end empty:hidden"><button class="inline-flex items-center rounded-full border p-0 ms-1.5" aria-label="Toggle Theme" data-theme-toggle=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-6.5 rounded-full p-1.5 bg-fd-accent text-fd-accent-foreground"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-6.5 rounded-full p-1.5 text-fd-muted-foreground"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg></button></div></div></aside><div id="nd-page" class="flex flex-1 mx-auto w-full" style="padding-top:calc(var(--fd-nav-height) + var(--fd-tocnav-height));max-width:min(var(--fd-page-width),calc(var(--fd-layout-width) - var(--fd-sidebar-width)))"><article class="flex min-w-0 w-full flex-col gap-4 px-4 pt-8 md:px-6 md:mx-auto xl:pt-12 xl:px-12"><div class="flex items-center gap-1.5 text-sm text-fd-muted-foreground"><a class="truncate transition-opacity hover:opacity-80" href="/docs/zh">Claude Code 文档中心</a><span class="text-fd-foreground/30">/</span><a class="truncate text-fd-primary font-medium transition-opacity hover:opacity-80" href="/docs/zh/best-practices">最佳实践</a></div><h1 class="text-3xl font-semibold">使用 Claude 生产真实代码的实战笔记</h1><p class="mb-8 text-lg text-fd-muted-foreground">一份关于 AI 辅助开发在生产环境中真正有效的综合指南。学习三种 vibe-coding 模式、基础设施设置，以及人类编写测试的神圣规则。</p><div class="prose"><h1 class="flex scroll-m-28 flex-row items-center gap-2" id="使用-claude-生产真实代码的实战笔记"><a data-card="" href="#使用-claude-生产真实代码的实战笔记" class="peer">使用 Claude 生产真实代码的实战笔记</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h1>
<h2 class="flex scroll-m-28 flex-row items-center gap-2" id="vibe-coding-不仅仅是一种感觉"><a data-card="" href="#vibe-coding-不仅仅是一种感觉" class="peer">Vibe Coding 不仅仅是一种感觉</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h2>
<p><img alt="闪烁的物质 - 杰克逊·波洛克" loading="lazy" width="2412" height="3000" decoding="async" data-nimg="1" class="rounded-lg" style="color: transparent;" sizes="(max-width: 768px) 100vw, (max-width: 1200px) 70vw, 900px" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2F8da4f924-0f2a-44c4-91f6-d285ace5e8a4.faa77902.jpg&amp;w=640&amp;q=75 640w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2F8da4f924-0f2a-44c4-91f6-d285ace5e8a4.faa77902.jpg&amp;w=750&amp;q=75 750w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2F8da4f924-0f2a-44c4-91f6-d285ace5e8a4.faa77902.jpg&amp;w=828&amp;q=75 828w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2F8da4f924-0f2a-44c4-91f6-d285ace5e8a4.faa77902.jpg&amp;w=1080&amp;q=75 1080w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2F8da4f924-0f2a-44c4-91f6-d285ace5e8a4.faa77902.jpg&amp;w=1200&amp;q=75 1200w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2F8da4f924-0f2a-44c4-91f6-d285ace5e8a4.faa77902.jpg&amp;w=1920&amp;q=75 1920w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2F8da4f924-0f2a-44c4-91f6-d285ace5e8a4.faa77902.jpg&amp;w=2048&amp;q=75 2048w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2F8da4f924-0f2a-44c4-91f6-d285ace5e8a4.faa77902.jpg&amp;w=3840&amp;q=75 3840w" src="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2F8da4f924-0f2a-44c4-91f6-d285ace5e8a4.faa77902.jpg&amp;w=3840&amp;q=75"></p>
<blockquote>
<p><strong>注意</strong>: 这篇文章配有 <em>NotebookLM</em> 播客（底部链接），以及 <em>三个</em> 生成的音频录制。</p>
<p>你可以阅读我在准备这篇文章草稿时与 ChatGPT 的<a href="https://chatgpt.com/share/6844eaae-07d0-8001-a7f7-e532d63bf8a3" rel="noreferrer noopener" target="_blank">对话</a>。</p>
<p>在<a href="https://news.ycombinator.com/item?id=44211417" rel="noreferrer noopener" target="_blank">相关 HN 帖子</a>上的评论和讨论。</p>
</blockquote>
<p>将这篇文章视为你构建软件新方式的实地指南。当你读完时，你将不仅理解 AI 辅助开发如何工作，更重要的是理解其背后的原因。</p>
<h3 class="flex scroll-m-28 flex-row items-center gap-2" id="你将学到什么"><a data-card="" href="#你将学到什么" class="peer">你将学到什么</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p>首先，我们将探索如何真正实现 10 倍生产力提升——不是通过魔法，而是通过放大 AI 优势同时补偿其弱点的刻意实践。</p>
<p>接下来，我将带你了解我们在 <a href="https://git.new/julep" rel="noreferrer noopener" target="_blank">Julep</a> 使用的、每天在 Claude 帮助下发布生产代码的基础设施。你将看到我们的 <code>CLAUDE.md</code> 模板、提交策略和防护措施。</p>
<p>最重要的是，你将理解为什么编写自己的测试仍然绝对神圣，特别是在 AI 时代。这一单一原则将让你免于许多深夜调试会话。</p>
<blockquote>
<p><strong>这是主要洞察</strong>: 良好的开发实践不仅仅是锦上添花——它们是 AI 放大你能力与制造混乱之间的区别。研究证实了这一点。使用严格实践的团队部署频率提高 46 倍，从提交到部署的速度提高 440 倍。当你将强大的 AI 助手加入其中时，这种效果更加明显。</p>
</blockquote>
<h2 class="flex scroll-m-28 flex-row items-center gap-2" id="这篇文章存在的原因从梗到方法"><a data-card="" href="#这篇文章存在的原因从梗到方法" class="peer">这篇文章存在的原因：从梗到方法</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h2>
<p>让我带你回到这一切开始的时候。<em>Andrej Karpathy</em> 发推文谈论"vibe-coding"——让 AI 编写代码而你只是感受氛围的想法。开发者社区都笑了。这听起来像是终极开发者幻想：放松，喝咖啡，让机器做工作。</p>
<p><img alt="vibe coding 的诞生" loading="lazy" width="716" height="553" decoding="async" data-nimg="1" class="rounded-lg" style="color: transparent;" sizes="(max-width: 768px) 100vw, (max-width: 1200px) 70vw, 900px" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fe482b99a-9e1e-4f5b-b968-0bf6255566d2.a878d308.png&amp;w=640&amp;q=75 640w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fe482b99a-9e1e-4f5b-b968-0bf6255566d2.a878d308.png&amp;w=750&amp;q=75 750w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fe482b99a-9e1e-4f5b-b968-0bf6255566d2.a878d308.png&amp;w=828&amp;q=75 828w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fe482b99a-9e1e-4f5b-b968-0bf6255566d2.a878d308.png&amp;w=1080&amp;q=75 1080w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fe482b99a-9e1e-4f5b-b968-0bf6255566d2.a878d308.png&amp;w=1200&amp;q=75 1200w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fe482b99a-9e1e-4f5b-b968-0bf6255566d2.a878d308.png&amp;w=1920&amp;q=75 1920w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fe482b99a-9e1e-4f5b-b968-0bf6255566d2.a878d308.png&amp;w=2048&amp;q=75 2048w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fe482b99a-9e1e-4f5b-b968-0bf6255566d2.a878d308.png&amp;w=3840&amp;q=75 3840w" src="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fe482b99a-9e1e-4f5b-b968-0bf6255566d2.a878d308.png&amp;w=3840&amp;q=75"></p>
<p>然后 <em>Anthropic</em> 发布了 Sonnet 3.7 和 Claude Code，意想不到的事情发生了。这个笑话不再好笑，因为它开始变得……可能？当然，我们可靠的朋友 <a href="https://www.cursor.com/" rel="noreferrer noopener" target="_blank">Cursor</a> 已经存在一段时间了，但这个新界面最终感觉像 <em>真正的 vibe coding</em>。</p>
<p>在 <a href="https://git.new/julep" rel="noreferrer noopener" target="_blank">Julep</a>，我们构建 AI 工作流编排。我们的后端有多年积累的决策、模式和偶尔的技术债务。我们极其小心地保持代码质量高，并为自己提供充足的文档。然而，代码的庞大规模和 <em>为什么</em> 不同部分以特定方式组织的历史背景，需要优秀工程师数周时间才能理解。</p>
<blockquote>
<p>在使用 Claude 时没有适当的防护措施，你基本上是在和一个过度热心的实习生玩打地鼠游戏。</p>
</blockquote>
<h2 class="flex scroll-m-28 flex-row items-center gap-2" id="理解-vibe-coding"><a data-card="" href="#理解-vibe-coding" class="peer">理解 Vibe-Coding</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h2>
<p><img alt="'pls fix'" loading="lazy" width="716" height="658" decoding="async" data-nimg="1" class="rounded-lg" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 280'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='none' style='filter: url(%23b);' href='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAMAAAACh/xsAAAAS1BMVEX38Ljw57n9/ef8+dDi4Nbu6tr8+9v28Mn7+cjPz8/38rL28+H28O7255Hdz7XTw7Lp36nZ08Do38fv69Lq17y9r6vJq4/ZzcTr2chWZvzJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAO0lEQVR4nAXBhwHAMAgDMCcBDJnd7f+XVoJT5GTa8GlE7xFYr4pm2bGeW1u2hnnNg3QAZoWpAmNUB7z8Q24B9DHFy3AAAAAASUVORK5CYII='/%3E%3C/svg%3E&quot;)" sizes="(max-width: 768px) 100vw, (max-width: 1200px) 70vw, 900px" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fe771b36e-bdb6-4c99-8949-0a3583bc6259.331e54ec.png&amp;w=640&amp;q=75 640w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fe771b36e-bdb6-4c99-8949-0a3583bc6259.331e54ec.png&amp;w=750&amp;q=75 750w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fe771b36e-bdb6-4c99-8949-0a3583bc6259.331e54ec.png&amp;w=828&amp;q=75 828w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fe771b36e-bdb6-4c99-8949-0a3583bc6259.331e54ec.png&amp;w=1080&amp;q=75 1080w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fe771b36e-bdb6-4c99-8949-0a3583bc6259.331e54ec.png&amp;w=1200&amp;q=75 1200w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fe771b36e-bdb6-4c99-8949-0a3583bc6259.331e54ec.png&amp;w=1920&amp;q=75 1920w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fe771b36e-bdb6-4c99-8949-0a3583bc6259.331e54ec.png&amp;w=2048&amp;q=75 2048w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fe771b36e-bdb6-4c99-8949-0a3583bc6259.331e54ec.png&amp;w=3840&amp;q=75 3840w" src="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fe771b36e-bdb6-4c99-8949-0a3583bc6259.331e54ec.png&amp;w=3840&amp;q=75"></p>
<p><em>Steve Yegge</em> 巧妙地创造了术语 <em>CHOP</em>——聊天导向编程，在一个稍微戏剧性的标题帖子<a href="https://sourcegraph.com/blog/the-death-of-the-junior-developer" rel="noreferrer noopener" target="_blank">"初级开发者的死亡"</a>中。这是对与 Claude 一起编程体验的完美、直白的描述。</p>
<p>将传统编程想象成雕刻大理石。你从空白块开始，仔细地一点一点凿刻，逐行逐函数。每一笔都是深思熟虑的，每一个决定都是你的。这很满足但很慢。</p>
<p>Vibe-coding 更像是指挥管弦乐队。你不是演奏每一种乐器——你在指导、塑造、引导。AI 提供原始的音乐天赋，但没有你的愿景，它只是噪音。</p>
<p>在 vibe-coding 时，你可以采取三种不同的姿态，每种都适合开发周期的不同阶段：</p>
<ol>
<li>
<p><strong>AI 作为初稿者</strong>: 在这里，AI 生成初始实现，而你专注于架构和设计。这就像有一个可以以思维速度打字的初级开发者，但需要持续指导。完美适用于样板代码、CRUD 操作和标准模式。</p>
</li>
<li>
<p><strong>AI 作为结对程序员</strong>: 这是大多数开发的甜蜜点。你积极协作，来回弹跳想法。AI 建议方法，你完善它们。你勾勒轮廓，AI 填充细节。这就像与一个读过所有编程书籍但从未真正发布过代码的人结对编程。</p>
</li>
<li>
<p><strong>AI 作为验证者</strong>: 有时你编写代码并想要理智检查。AI 审查错误，建议改进，发现你可能错过的模式。将其视为一个永远不会疲倦或暴躁的极其博学的代码审查者。</p>
</li>
</ol>
<blockquote>
<p>你不是在精心制作每一行，而是在审查、完善、指导。但是——这一点不能过分强调——你仍然是架构师。Claude 是你的实习生，拥有百科全书般的知识，但对你的特定系统、用户、业务逻辑零上下文。</p>
</blockquote>
<h2 class="flex scroll-m-28 flex-row items-center gap-2" id="vibe-coding-的三种模式实用框架"><a data-card="" href="#vibe-coding-的三种模式实用框架" class="peer">Vibe-Coding 的三种模式：实用框架</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h2>
<p>经过数月的实验和不止几次的生产事故，我确定了三种不同的操作模式。每种都有自己的节奏、自己的防护措施和自己的用例。</p>
<h3 class="flex scroll-m-28 flex-row items-center gap-2" id="模式-1游乐场"><a data-card="" href="#模式-1游乐场" class="peer">模式 1：<em>游乐场</em></a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p><img alt="打火机液体" loading="lazy" width="658" height="268" decoding="async" data-nimg="1" class="rounded-lg" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 120'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='none' style='filter: url(%23b);' href='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAFVBMVEXb29vS0tLl5eXt7e27u7v19fW5ubmOo81uAAAACXBIWXMAAAxOAAAMTgF/d4wjAAAAIElEQVR4nGNgZGRjYWRkZGNgZmJgYGJiZmBgZGBiBXEAAtAALwy9O6kAAAAASUVORK5CYII='/%3E%3C/svg%3E&quot;)" sizes="(max-width: 768px) 100vw, (max-width: 1200px) 70vw, 900px" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fede9227b-cd8d-4505-ba93-21c9c7fcb31a.35a8e5c9.png&amp;w=640&amp;q=75 640w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fede9227b-cd8d-4505-ba93-21c9c7fcb31a.35a8e5c9.png&amp;w=750&amp;q=75 750w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fede9227b-cd8d-4505-ba93-21c9c7fcb31a.35a8e5c9.png&amp;w=828&amp;q=75 828w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fede9227b-cd8d-4505-ba93-21c9c7fcb31a.35a8e5c9.png&amp;w=1080&amp;q=75 1080w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fede9227b-cd8d-4505-ba93-21c9c7fcb31a.35a8e5c9.png&amp;w=1200&amp;q=75 1200w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fede9227b-cd8d-4505-ba93-21c9c7fcb31a.35a8e5c9.png&amp;w=1920&amp;q=75 1920w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fede9227b-cd8d-4505-ba93-21c9c7fcb31a.35a8e5c9.png&amp;w=2048&amp;q=75 2048w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fede9227b-cd8d-4505-ba93-21c9c7fcb31a.35a8e5c9.png&amp;w=3840&amp;q=75 3840w" src="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fede9227b-cd8d-4505-ba93-21c9c7fcb31a.35a8e5c9.png&amp;w=3840&amp;q=75"></p>
<p><strong>何时使用</strong>: 周末黑客、个人脚本、概念验证，以及那些让编程变得有趣的"我想知道如果…"时刻。</p>
<p>在 <em>游乐场模式</em> 中，你拥抱混乱。Claude 编写 80-90% 的代码，而你提供足够的指导来保持正轨。这很解放，也稍微可怕。<em>专业提示</em>: 查看 <a href="https://github.com/possibilities/claude-composer" rel="noreferrer noopener" target="_blank">claude-composer</a> 进行全 YOLO 模式。</p>
<p>游乐场模式是这样的：你有一个分析 Spotify 历史脚本的想法。你打开 Claude，用简单的英语描述你想要什么，然后看着它生成完整的解决方案。没有 <code>CLAUDE.md</code> 文件，没有仔细的提示——只是原始、未过滤的 AI 编写的代码。</p>
<p>游乐场模式的美在于速度。你可以在几分钟内从想法到工作原型。危险在于这种牛仔编码风格绝对不适合任何重要的事情。将其用于实验，永远不要用于生产。相信我，虽然令人惊叹的人们宣扬相反的观点，但良好的工程原则仍然重要，<a href="https://www.ikangai.com/vibe-coding-in-software-engineering/" rel="noreferrer noopener" target="_blank">现在比以往任何时候都更重要</a>。</p>
<h3 class="flex scroll-m-28 flex-row items-center gap-2" id="模式-2结对编程"><a data-card="" href="#模式-2结对编程" class="peer">模式 2：<em>结对编程</em></a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p><img alt="编译中" loading="lazy" width="413" height="360" decoding="async" data-nimg="1" class="rounded-lg" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 280'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='none' style='filter: url(%23b);' href='data:image/webp;base64,UklGRjgAAABXRUJQVlA4ICwAAACwAQCdASoIAAcAAkA4JaQAAudmbY84AP78jt2GaGkCN7YX3HZcAF8f1QAAAA=='/%3E%3C/svg%3E&quot;)" sizes="(max-width: 768px) 100vw, (max-width: 1200px) 70vw, 900px" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fd84d1867-c2b4-4ef9-8904-b7c69cf12154.33bbabd4.webp&amp;w=640&amp;q=75 640w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fd84d1867-c2b4-4ef9-8904-b7c69cf12154.33bbabd4.webp&amp;w=750&amp;q=75 750w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fd84d1867-c2b4-4ef9-8904-b7c69cf12154.33bbabd4.webp&amp;w=828&amp;q=75 828w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fd84d1867-c2b4-4ef9-8904-b7c69cf12154.33bbabd4.webp&amp;w=1080&amp;q=75 1080w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fd84d1867-c2b4-4ef9-8904-b7c69cf12154.33bbabd4.webp&amp;w=1200&amp;q=75 1200w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fd84d1867-c2b4-4ef9-8904-b7c69cf12154.33bbabd4.webp&amp;w=1920&amp;q=75 1920w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fd84d1867-c2b4-4ef9-8904-b7c69cf12154.33bbabd4.webp&amp;w=2048&amp;q=75 2048w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fd84d1867-c2b4-4ef9-8904-b7c69cf12154.33bbabd4.webp&amp;w=3840&amp;q=75 3840w" src="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fd84d1867-c2b4-4ef9-8904-b7c69cf12154.33bbabd4.webp&amp;w=3840&amp;q=75"></p>
<p><strong>何时使用</strong>: _约 5,000 行代码以下_的项目、有真实用户的副项目、演示（你不想破坏），或大型系统中范围明确的小服务。</p>
<p>这是 vibe-coding 开始发光的地方。你需要结构，但不要太多以至于减慢你的速度。这里的关键创新是 <code>CLAUDE.md</code> 文件——Claude 在调用时自动读取的自定义文档。来自 Anthropic 的 <a href="https://www.anthropic.com/engineering/claude-code-best-practices" rel="noreferrer noopener" target="_blank">Claude Code 最佳实践</a>:</p>
<blockquote>
<p><code>CLAUDE.md</code> 是一个特殊文件，Claude 在开始对话时自动拉入上下文：</p>
<ul>
<li>常见的 bash 命令</li>
<li>核心文件和实用函数</li>
<li>代码风格指南</li>
<li>测试说明</li>
<li>仓库礼仪（例如，分支命名、merge vs. rebase 等）</li>
<li>你希望 Claude 记住的其他信息</li>
</ul>
</blockquote>
<p>你不是重复解释项目的约定，而是记录一次。这是一个最近副项目的真实例子：</p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">## 项目：分析仪表板  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">这是一个用于可视化用户分析的 Next.js 仪表板：  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">### 架构决策  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 默认使用服务器组件，仅在必要时使用客户端组件  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 使用 tRPC 进行类型安全的 API 调用  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 使用 Prisma 进行数据库访问，使用显式 select 语句  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 使用 Tailwind 进行样式设计（无自定义 CSS 文件）  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">### 代码风格  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 格式化：使用 100 字符行的 Prettier  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 导入：使用 simple-import-sort 排序  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 组件：Pascal 命名法，与测试共置  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Hooks：始终以 'use' 前缀  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">### 要遵循的模式  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 数据获取发生在服务器组件中  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 客户端组件接收数据作为 props  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 对所有外部数据使用 Zod 模式  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 在每个数据显示组件周围使用错误边界  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">### 不要做什么  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 不要使用 useEffect 进行数据获取  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 不要在没有明确批准的情况下创建全局状态  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 不要用 'any' 类型绕过 TypeScript</span></span></code></pre></div></figure>
<p>有了这个上下文，Claude 变得非常有效。这就像每天向新员工解释项目与让他们读一次入职文档的区别。</p>
<p>但 <em>结对编程模式</em> 需要的不仅仅是文档。你需要用我称之为"锚点注释"的东西积极指导 AI——防止 Claude 迷失在荒野中的面包屑：</p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// AIDEV-NOTE: 此组件使用虚拟滚动以提高性能  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 参见：https://tanstack.com/virtual/latest  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 不要转换为常规映射——我们处理 10k+ 项目  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> DataTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">items</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> DataTableProps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // Claude，当你编辑这个时，保持虚拟滚动  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre></div></figure>
<p>这些注释服务于双重目的：它们指导 AI 并为人类记录代码。这是双向都有回报的文档。这种"锚点注释"与常规注释的<strong>关键区别</strong>：这些是_编写的_、<em>维护的</em>，并且_旨在被_ Claude 本身使用。这是我们<a href="https://github.com/julep-ai/julep/blob/dev/AGENTS.md" rel="noreferrer noopener" target="_blank">项目 CLAUDE.md</a> 的_实际片段_：</p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">## 锚点注释  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">在代码库中适当位置添加特殊格式的注释，作为可以轻松 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">`grep`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 的内联知识。  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">### 指南：  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 使用 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">`AIDEV-NOTE:`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">、</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">`AIDEV-TODO:`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 或 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">`AIDEV-QUESTION:`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">（全大写前缀）作为针对 AI 和开发者的注释。  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 保持简洁（≤ 120 字符）。  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold"> **重要：**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 在扫描文件之前，始终首先尝试在相关子目录中</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold">**定位现有锚点**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> `AIDEV-*`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">。  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold"> **更新相关锚点**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">当修改相关代码时。  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold"> **不要删除 </span><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">`AIDEV-NOTE`</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold">s**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">除非有明确的人工指令。  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">示例：  </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold"># AIDEV-NOTE: perf-hot-path; 避免额外分配（参见 ADR-24）  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">async def render_feed(...):  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ...</span></span></code></pre></div></figure>
<h3 class="flex scroll-m-28 flex-row items-center gap-2" id="模式-3生产单体仓库规模"><a data-card="" href="#模式-3生产单体仓库规模" class="peer">模式 3：<em>生产/单体仓库规模</em></a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p><img alt="RTFM" loading="lazy" width="350" height="434" decoding="async" data-nimg="1" class="rounded-lg" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 240 320'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='none' style='filter: url(%23b);' href='data:image/webp;base64,UklGRjgAAABXRUJQVlA4ICwAAACwAQCdASoGAAgAAkA4JaQAAud8PnAAAP78kcntdp/AdgovAscsD0uLaoAAAA=='/%3E%3C/svg%3E&quot;)" sizes="(max-width: 768px) 100vw, (max-width: 1200px) 70vw, 900px" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2F97c55ab9-c876-4018-841f-ee014757e908.b6f3d795.webp&amp;w=640&amp;q=75 640w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2F97c55ab9-c876-4018-841f-ee014757e908.b6f3d795.webp&amp;w=750&amp;q=75 750w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2F97c55ab9-c876-4018-841f-ee014757e908.b6f3d795.webp&amp;w=828&amp;q=75 828w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2F97c55ab9-c876-4018-841f-ee014757e908.b6f3d795.webp&amp;w=1080&amp;q=75 1080w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2F97c55ab9-c876-4018-841f-ee014757e908.b6f3d795.webp&amp;w=1200&amp;q=75 1200w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2F97c55ab9-c876-4018-841f-ee014757e908.b6f3d795.webp&amp;w=1920&amp;q=75 1920w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2F97c55ab9-c876-4018-841f-ee014757e908.b6f3d795.webp&amp;w=2048&amp;q=75 2048w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2F97c55ab9-c876-4018-841f-ee014757e908.b6f3d795.webp&amp;w=3840&amp;q=75 3840w" src="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2F97c55ab9-c876-4018-841f-ee014757e908.b6f3d795.webp&amp;w=3840&amp;q=75"></p>
<p><strong>何时使用</strong>: 大型代码库、有真实用户的系统、任何错误会花费金钱或声誉的地方。</p>
<p>Claude 可以生成大量代码，但将其集成到复杂系统中需要仔细编排。</p>
<p>让我先说明一个大警告：<strong>在这个规模上的 vibe coding 还不太好扩展，</strong> 目前。我确实看到这些系统在处理更大代码库方面变得显著更好，<em>但</em>，为了让它们有效，需要大量努力来帮助它们导航、理解和_安全地_在它们上工作，而不会在迷宫中迷失。一般来说，最好将它们分成单独的服务，并在可能时使用子模块。</p>
<p>作为通用原则，良好的工程实践适用于大型项目，无论是否 vibe coded。例如，在生产规模上，边界变得关键。每个集成点都需要明确的文档：</p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># AIDEV-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">NOTE</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">: API 合约边界 - v2.3.1  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># 任何更改都需要版本升级和迁移计划  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># 参见：docs/api-versioning.md  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">@router.get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"/users/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">{user_id}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/feed"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> get_user_feed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(user_id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">UUID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) -&gt; FeedResponse:  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # Claude：这里的响应形状是神圣的  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # 更改会破坏生产中的真实应用  </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    ...</span></span></code></pre></div></figure>
<p>没有这些边界，Claude 会愉快地"改进"你的 API 并破坏生产中的每个客户端。底线：更大的项目应该_绝对_开始在部分中采用 vibe coding，并采用增强这种体验的方法，但，不要期望可靠地落地大型功能。（截至 <em>2025 年 6 月 7 日 / AI 时代</em>）</p>
<h2 class="flex scroll-m-28 flex-row items-center gap-2" id="基础设施可持续-ai-开发的基础"><a data-card="" href="#基础设施可持续-ai-开发的基础" class="peer">基础设施：可持续 AI 开发的基础</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h2>
<h3 class="flex scroll-m-28 flex-row items-center gap-2" id="claudemd你的单一真相来源"><a data-card="" href="#claudemd你的单一真相来源" class="peer"><code>CLAUDE.md</code>：你的单一真相来源</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p>让我绝对清楚这一点：<code>CLAUDE.md</code> 不是可选的文档。你花在更新它上的每一分钟都节省了以后一小时的清理工作。</p>
<p>将 <code>CLAUDE.md</code> 视为你代码库的宪法。它建立了管理代码应该如何编写、系统如何交互以及要遵循或避免什么模式的基本法律。投资于发展团队技能和能力的组织会获得更好的结果——你的 <code>CLAUDE.md</code> 就是这种投资结晶成文档。</p>
<p>这是我们<a href="https://github.com/julep-ai/julep/blob/dev/AGENTS.md" rel="noreferrer noopener" target="_blank">生产 <code>CLAUDE.md</code></a> 结构的精简版本，经过数千次 AI 辅助提交的完善：</p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold"># </span><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">`CLAUDE.md`</span><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold"> - Julep 后端服务  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">## 黄金法则  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">当不确定实现细节时，始终询问开发者。  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">## 项目上下文  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Julep 使开发者能够使用声明式工作流构建有状态的 AI 代理。  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">## 关键架构决策  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">### 为什么使用 Temporal？  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">我们使用 Temporal 进行工作流编排，因为：  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">1.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 工作流可以运行数天/数周，具有完美的可靠性  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">2.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 从任何失败点自动恢复  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">### 为什么使用 PostgreSQL + pgvector？  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">1.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 工作流状态的 ACID 合规性（不能丢失用户数据）  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">2.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 代理记忆的向量相似性搜索  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">### 为什么使用 TypeSpec？  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">API 定义的单一真相来源：  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> OpenAPI 规范  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> TypeScript/Python 客户端  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 验证模式  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">## 代码风格和模式  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">### 锚点注释  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">在代码库中适当位置添加特殊格式的注释，作为可以轻松 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">`grep`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 的内联知识。  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">### 指南：  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 使用 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">`AIDEV-NOTE:`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">、</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">`AIDEV-TODO:`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 或 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">`AIDEV-QUESTION:`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">（全大写前缀）作为针对 AI 和开发者的注释。  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold"> **重要：**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 在扫描文件之前，始终首先尝试</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold">**grep 现有锚点**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> `AIDEV-*`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 在相关子目录中。  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold"> **更新相关锚点**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">当修改相关代码时。  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold"> **不要删除 </span><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">`AIDEV-NOTE`</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold">s**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">除非有明确的人工指令。  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 确保在以下情况下添加相关锚点注释，每当文件或代码片段：  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 太复杂，或  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 非常重要，或  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 令人困惑，或  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 可能有错误  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">## 领域词汇表（Claude，学习这些！）  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold"> **代理**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: 具有记忆、工具和定义行为的 AI 实体  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold"> **任务**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: 由步骤组成的工作流定义（不是 Celery 任务）  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold"> **执行**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: 任务的运行实例  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold"> **工具**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: 代理可以调用的函数（浏览器、API 等）  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold"> **会话**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: 具有记忆的对话上下文  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold"> **条目**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: 会话中的单个交互  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">## AI 绝不能做的事情  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">1.</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold"> **永远不要修改测试文件**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> - 测试编码人类意图  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">2.</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold"> **永远不要更改 API 合约**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> - 破坏真实应用  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">3.</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold"> **永远不要更改迁移文件**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> - 数据丢失风险  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">4.</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold"> **永远不要提交秘密**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> - 使用环境变量  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">5.</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold"> **永远不要假设业务逻辑**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> - 始终询问  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">6.</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold"> **永远不要删除 AIDEV- 注释**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> - 它们在那里是有原因的  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">记住：我们优化可维护性而不是聪明。  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">当有疑问时，选择无聊的解决方案。</span></span></code></pre></div></figure>
<p>这个文档成为你和 Claude 之间的共享上下文。这就像有一个高级开发者在整个编码会话中在 Claude 耳边轻声指导。</p>
<p>随着你的代码库增长，仅 <code>CLAUDE.md</code> 是不够的。你需要内联指导——我称之为锚点注释。这些作为防止 AI 做出局部错误决策的本地上下文。</p>
<p>将你的代码库想象成一个城市，锚点注释作为路标。没有它们，即使聪明的访客也会迷路。以下是我们有效使用它们的方式：</p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># AIDEV-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">NOTE</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">: 关键性能路径 - 这服务于 100k req/sec  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># 不要在这里添加数据库查询  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> get_user_feed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(user_id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">UUID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, cached_data: FeedCache) -&gt; List[FeedItem]:  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # 我们需要避免修改缓存数据  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    items </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cached_data.items[:]  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # AIDEV-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">TODO</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">: 实现分页（票据：FEED-123）  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # 需要基于游标的分页用于无限滚动  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # AIDEV-QUESTION: 为什么我们在这里而不是在缓存中过滤私有项目？  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # AIDEV-ANSWER: 历史上下文：隐私规则可能在缓存更新之间改变  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    filtered </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> items </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> user_has_access(user_id, item)]  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> filtered</span></span></code></pre></div></figure>
<p>这些注释创建了一个叙述，帮助 AI 和人类理解不仅仅是代码做什么，而是为什么这样做。</p>
<h3 class="flex scroll-m-28 flex-row items-center gap-2" id="ai-开发的-git-工作流"><a data-card="" href="#ai-开发的-git-工作流" class="peer">AI 开发的 Git 工作流</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p>AI 辅助开发最被低估的方面之一是它如何改变你的 git 工作流。你现在以可能快速污染 git 历史的速度生成代码，如果你不小心的话。</p>
<p>它真的只适用于非常大的代码库，因为它不是非常直接的工具，但我建议使用 <a href="https://www.anthropic.com/engineering/claude-code-best-practices#c-use-git-worktrees" rel="noreferrer noopener" target="_blank">git worktrees</a> 为 AI 实验创建隔离环境：</p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># 创建 AI 游乐场而不污染主分支  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> worktree</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ../ai-experiments/cool-feature</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ai/cool-feature</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># 让 Claude 在隔离的 worktree 中疯狂  </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ../ai-experiments/cool-feature</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># ... 大量实验性提交 ...  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># 将好东西 cherry-pick 回主分支  </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ../main-repo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> cherry-pick</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> abc123</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  # 只是有效的提交  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># 完成后清理  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> worktree</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> remove</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ../ai-experiments/cool-feature</span></span></code></pre></div></figure>
<blockquote>
<p><strong>专业提示</strong>: 阅读<a href="https://dev.to/yankee/practical-guide-to-git-worktree-58o0" rel="noreferrer noopener" target="_blank">如何使用 worktrees</a>，并查看巧妙的 <a href="https://github.com/taecontrol/wt" rel="noreferrer noopener" target="_blank"><code>wt</code></a> 工具。</p>
</blockquote>
<p>这种方法给你两全其美：Claude 可以自由实验，而你的主分支历史保持清洁和有意义。</p>
<p>对于提交消息，我们已经标准化了标记 AI 辅助提交：</p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span>feat: 实现用户 feed 缓存 [AI]  </span></span>
<span class="line"><span></span></span>
<span class="line"><span>- 为用户 feeds 添加基于 Redis 的缓存  </span></span>
<span class="line"><span>- 在用户登录时实现缓存预热  </span></span>
<span class="line"><span>- 添加缓存命中率指标  </span></span>
<span class="line"><span></span></span>
<span class="line"><span>AI 辅助：核心逻辑生成，测试人工编写</span></span></code></pre></div></figure>
<p>这种透明度在代码审查期间有帮助——审查者知道要特别注意 AI 生成的代码。</p>
<h2 class="flex scroll-m-28 flex-row items-center gap-2" id="神圣规则人类编写测试"><a data-card="" href="#神圣规则人类编写测试" class="peer">神圣规则：人类编写测试</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h2>
<p>现在我们来到 AI 辅助开发中最重要的原则。它如此重要，我将以多种方式重复它，直到它烙印在你的记忆中：</p>
<p><strong>永远。不要。让。AI。编写。你的。测试。</strong></p>
<p>测试不仅仅是验证其他代码工作的代码。测试是可执行的规范。它们编码你的实际意图、你的边缘情况、你对问题领域的理解。高绩效者在速度和稳定性方面都表现出色——没有权衡。测试是你实现两者的方式。</p>
<p><img alt="当心…" loading="lazy" width="625" height="625" decoding="async" data-nimg="1" class="rounded-lg" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 320'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='none' style='filter: url(%23b);' href='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAQlBMVEUlIx2tpZCklXctKiKOinynqqiroYTDxsOXjXS0tLGflnuUlY63nX2ghmWtqZm6kXaWcV2Tc3HEtpignI6+t6IxMSvrIiF8AAAACXBIWXMAAC4jAAAuIwF4pT92AAAAPElEQVR4nDXBxwHAIAwEsAN3m5K6/6p5RQJ+6czlM9FZJCoVHibFc8DFLM5jo99m0VShfa32XAMAgV6iDzhiAcPeQ9u2AAAAAElFTkSuQmCC'/%3E%3C/svg%3E&quot;)" sizes="(max-width: 768px) 100vw, (max-width: 1200px) 70vw, 900px" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2F5dd77e55-5b53-412a-a169-e61d88eff60a.97afb0aa.png&amp;w=640&amp;q=75 640w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2F5dd77e55-5b53-412a-a169-e61d88eff60a.97afb0aa.png&amp;w=750&amp;q=75 750w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2F5dd77e55-5b53-412a-a169-e61d88eff60a.97afb0aa.png&amp;w=828&amp;q=75 828w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2F5dd77e55-5b53-412a-a169-e61d88eff60a.97afb0aa.png&amp;w=1080&amp;q=75 1080w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2F5dd77e55-5b53-412a-a169-e61d88eff60a.97afb0aa.png&amp;w=1200&amp;q=75 1200w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2F5dd77e55-5b53-412a-a169-e61d88eff60a.97afb0aa.png&amp;w=1920&amp;q=75 1920w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2F5dd77e55-5b53-412a-a169-e61d88eff60a.97afb0aa.png&amp;w=2048&amp;q=75 2048w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2F5dd77e55-5b53-412a-a169-e61d88eff60a.97afb0aa.png&amp;w=3840&amp;q=75 3840w" src="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2F5dd77e55-5b53-412a-a169-e61d88eff60a.97afb0aa.png&amp;w=3840&amp;q=75"></p>
<p>让我用一个例子说明为什么这很重要。假设我们要求 Claude 实现一个速率限制器：</p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> RateLimiter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self, max_requests: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, window_seconds: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">):  </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.max_requests </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> max_requests  </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.window_seconds </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> window_seconds  </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.requests </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> defaultdict(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> is_allowed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self, user_id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        now </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> time.time()  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        user_requests </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.requests[user_id]  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        # 清理旧请求  </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.requests[user_id] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            req_time </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> req_time </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> user_requests  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> now </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> req_time </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.window_seconds  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        ]  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.requests[user_id]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.max_requests:  </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">            self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.requests[user_id].append(now)  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> False</span></span></code></pre></div></figure>
<p>看起来合理，对吧？Claude 甚至有帮助地生成了测试：</p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> test_rate_limiter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">():  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    limiter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> RateLimiter(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">max_requests</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">window_seconds</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> limiter.is_allowed(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"user1"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> limiter.is_allowed(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"user1"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> limiter.is_allowed(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"user1"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> limiter.is_allowed(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"user1"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> False</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  # 达到限制</span></span></code></pre></div></figure>
<p>但这是 Claude 的测试错过的——只有理解业务需求的人类才会测试的：Claude 的实现有内存泄漏。只访问 API 一次且永不返回的用户会在内存中永远留下他们的数据。AI 生成的测试检查快乐路径但错过了这个关键的生产问题。</p>
<p><img alt="Vibe coding 的最佳状态" loading="lazy" width="400" height="144" decoding="async" data-nimg="1" class="rounded-lg" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 120'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='none' style='filter: url(%23b);' href='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAD1BMVEXx8fHj4+Pb29v39/fs7OymYNvtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAHElEQVR4nAXBAQEAAACCILP+bw6ImhYYGsNaBjsCUwAtWxy76gAAAABJRU5ErkJggg=='/%3E%3C/svg%3E&quot;)" sizes="(max-width: 768px) 100vw, (max-width: 1200px) 70vw, 900px" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fa4c32be3-f91c-44e3-aebd-c65f50fbd379.3cd08737.png&amp;w=640&amp;q=75 640w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fa4c32be3-f91c-44e3-aebd-c65f50fbd379.3cd08737.png&amp;w=750&amp;q=75 750w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fa4c32be3-f91c-44e3-aebd-c65f50fbd379.3cd08737.png&amp;w=828&amp;q=75 828w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fa4c32be3-f91c-44e3-aebd-c65f50fbd379.3cd08737.png&amp;w=1080&amp;q=75 1080w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fa4c32be3-f91c-44e3-aebd-c65f50fbd379.3cd08737.png&amp;w=1200&amp;q=75 1200w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fa4c32be3-f91c-44e3-aebd-c65f50fbd379.3cd08737.png&amp;w=1920&amp;q=75 1920w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fa4c32be3-f91c-44e3-aebd-c65f50fbd379.3cd08737.png&amp;w=2048&amp;q=75 2048w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fa4c32be3-f91c-44e3-aebd-c65f50fbd379.3cd08737.png&amp;w=3840&amp;q=75 3840w" src="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fa4c32be3-f91c-44e3-aebd-c65f50fbd379.3cd08737.png&amp;w=3840&amp;q=75"></p>
<p>这就是为什么人类编写测试。我们理解上下文、生产环境、重要的边缘情况。在 Julep，我们的规则是绝对的：</p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">## 测试纪律  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">| 什么 | AI 可以做什么 | AI 绝不能做什么 |  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">|------|-----------|----------------|  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">| 实现 | 生成业务逻辑 | 触摸测试文件 |  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">| 测试规划 | 建议测试场景 | 编写测试代码 |  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">| 调试 | 分析测试失败 | 修改测试期望 |  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">如果 AI 工具触摸测试文件，PR 被拒绝。没有例外。</span></span></code></pre></div></figure>
<p>你的测试是你的规范。它们是你的安全网。它们是每个你修复的 bug 和每个你发现的边缘情况的编码智慧。狂热地保护它们。</p>
<h2 class="flex scroll-m-28 flex-row items-center gap-2" id="不溺水地扩展token-经济学和上下文管理"><a data-card="" href="#不溺水地扩展token-经济学和上下文管理" class="peer">不溺水地扩展：Token 经济学和上下文管理</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h2>
<p>AI 辅助开发中最违反直觉的教训之一是，为了节省 token 而在上下文上吝啬实际上会让你付出更多代价。这就像试图通过只加半箱油来节省汽油钱——你最终只会去加油站更多次。</p>
<p>Token 预算很重要。提供重点提示，减少差异长度，通过提前总结意图来避免大文件膨胀。但"重点"并不意味着"最小"——它意味着"相关和完整"。</p>
<p>让我向你展示饥饿提示的虚假经济：</p>
<p><strong>饥饿提示尝试：</strong></p>
<p><code>"为用户端点添加缓存"</code>
<strong>Claude 的响应:</strong> 实现缓存…但是：</p>
<ul>
<li>使用内存缓存（不适用于多个服务器）</li>
<li>没有缓存失效策略</li>
<li>没有指标或监控</li>
<li>没有考虑缓存雪崩</li>
</ul>
<p><strong>结果:</strong> 3 轮修复，<em>花费了 4 倍的 token</em>。</p>
<p><strong>适当丰富的上下文提示：</strong></p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span>为 GET /users/{id} 端点添加 Redis 缓存。  </span></span>
<span class="line"><span></span></span>
<span class="line"><span>上下文：  </span></span>
<span class="line"><span>- 此端点服务于 50k 请求/分钟  </span></span>
<span class="line"><span>- 我们在负载均衡器后面运行 12 个 API 服务器  </span></span>
<span class="line"><span>- 用户数据很少变化（每天几次）  </span></span>
<span class="line"><span>- 我们已经在 cache.redis.internal:6379 有 Redis  </span></span>
<span class="line"><span>- 使用我们的标准缓存键模式："user:v1:{id}"  </span></span>
<span class="line"><span>- 包含缓存命中/未命中指标（我们使用 Prometheus）  </span></span>
<span class="line"><span>- 实现缓存旁路模式，TTL 1 小时  </span></span>
<span class="line"><span>- 使用概率早期过期处理缓存雪崩  </span></span>
<span class="line"><span></span></span>
<span class="line"><span>参见我们的缓存指南：docs/patterns/caching.md</span></span></code></pre></div></figure>
<p>教训？预先加载上下文以避免迭代周期。将 token 视为投资好工具——前期成本会多次回报。</p>
<p>事实上，我建议所有项目都应该定期要求 Claude 查看代码库更改，并向 <code>CLAUDE.md</code> 添加上下文</p>
<h3 class="flex scroll-m-28 flex-row items-center gap-2" id="新会话和心理模型"><a data-card="" href="#新会话和心理模型" class="peer">新会话和心理模型</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p>这是另一个违反直觉的实践：为不同任务使用新的 Claude 会话。保持一个长期运行的对话很诱人，但这会导致上下文污染。</p>
<p>这样想：你不会在切生鸡肉后用同一个砧板切蔬菜。同样，不要在讨论前端样式后使用同一个 Claude 会话进行数据库迁移。上下文会以微妙的方式渗透。</p>
<p>我们的规则：一个任务，一个会话。当任务完成时，重新开始。这保持 Claude 的"心理模型"清洁和专注。</p>
<h2 class="flex scroll-m-28 flex-row items-center gap-2" id="案例研究在生产中发布结构化错误"><a data-card="" href="#案例研究在生产中发布结构化错误" class="peer">案例研究：在生产中发布结构化错误</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h2>
<p>让我带你了解我们在 Julep 做的一个真实重构，展示了生产规模的 vibe-coding。我们需要用结构化错误层次结构替换我们临时错误处理，跨越 500+ 端点。</p>
<p><strong>人类决策（为什么）：</strong></p>
<p>首先，我们必须决定我们的错误分类法。这是纯粹的架构工作——Claude 不能做出这些决定，因为它们涉及理解我们的业务、用户和运营需求：</p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold"># SPEC.md - 错误层次结构设计（人工编写）  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">## 错误哲学  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 客户端错误（4xx）必须包含可操作的反馈  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 系统错误（5xx）必须包含用于调试的跟踪 ID  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 所有错误必须是 JSON 可序列化的  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 错误代码必须稳定（客户端依赖它们）  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">## 层次结构  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">BaseError  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">├── ClientError (4xx)  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">│   ├── ValidationError  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">│   │   ├── SchemaValidationError - 请求不匹配模式  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">│   │   ├── BusinessRuleError - 有效模式，无效业务逻辑  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">│   │   └── RateLimitError - 请求过多  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">│   └── AuthError  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">│       ├── AuthenticationError - 你是谁？  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">│       └── AuthorizationError - 你不能那样做  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">└── SystemError (5xx)  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ├── DatabaseError - 连接、超时、死锁  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ├── ExternalServiceError - API、webhook 失败  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    └── InfrastructureError - 磁盘满、OOM 等  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold">## 错误响应格式  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  "error": {  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    "code": "VALIDATION_FAILED",</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">     // 客户端的稳定代码  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    "message": "邮箱已存在",</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> // 人类可读  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    "details": { ... },</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">               // 结构化数据  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    "trace_id": "abc-123-def"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">         // 用于调试  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre></div></figure>
<p><strong>AI 执行（如何）：</strong></p>
<p>有了明确的规范，我们让 Claude 处理机械重构：</p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span>### 给 Claude 的提示：  </span></span>
<span class="line"><span></span></span>
<span class="line"><span>重构我们的错误处理以匹配 SPEC.md。  </span></span>
<span class="line"><span></span></span>
<span class="line"><span>当前状态：  </span></span>
<span class="line"><span>- raise ValueError("无效邮箱")  </span></span>
<span class="line"><span>- return {"error": "出错了"}, 500  </span></span>
<span class="line"><span></span></span>
<span class="line"><span>目标状态：  </span></span>
<span class="line"><span>- 使用 SPEC.md 中的错误层次结构  </span></span>
<span class="line"><span>- 包含适当的错误代码  </span></span>
<span class="line"><span>- 为所有 5xx 错误添加 trace_id  </span></span>
<span class="line"><span></span></span>
<span class="line"><span>从 auth 模块开始。在实现之前向我展示计划。</span></span></code></pre></div></figure>
<p>Claude 的计划很扎实：</p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span>1. 在 `common/errors.py` 中创建错误层次结构  </span></span>
<span class="line"><span>2. 创建错误响应格式化器  </span></span>
<span class="line"><span>3. 系统性地更新每个模块  </span></span>
<span class="line"><span>4. 添加错误处理中间件</span></span></code></pre></div></figure>
<p>Claude 能够处理查找和更新 500+ 错误站点的繁琐工作，而我们专注于审查：</p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># 之前（Claude 找到这些模式）：  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> user:  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    raise</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> Exception</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"用户未找到"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># 之后（Claude 的重构）：  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> user:  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    raise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> AuthenticationError(  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">        message</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"用户未找到"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">        code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"USER_NOT_FOUND"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,  </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">        details</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"identifier"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: email}  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    )</span></span></code></pre></div></figure>
<blockquote>
<p>结合我们精心编写的 <code>CLAUDE.md</code> 文件、细致的文档、定期更新的锚点注释和清晰的指令，结果：</p>
<ul>
<li>时间：4 小时而不是 2 天</li>
<li>覆盖：所有 500+ 错误站点已更新</li>
</ul>
</blockquote>
<h2 class="flex scroll-m-28 flex-row items-center gap-2" id="ai-时代的领导力和文化"><a data-card="" href="#ai-时代的领导力和文化" class="peer">AI 时代的领导力和文化</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h2>
<p>你作为高级工程师的角色已经根本性地转变。你不再只是编写代码——你在策划知识、设定边界，并教导人类和 AI 系统如何有效工作。</p>
<p>精益管理和持续交付实践有助于改善软件交付性能，进而改善组织性能——这包括你如何管理 AI 协作。</p>
<h3 class="flex scroll-m-28 flex-row items-center gap-2" id="新的入职检查清单"><a data-card="" href="#新的入职检查清单" class="peer">新的入职检查清单</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p>当新开发者加入我们的团队时，他们获得两个入职轨道：一个针对人类，一个针对与 AI 合作。这是我们的组合检查清单：</p>
<p><strong>第 1 周：基础</strong></p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span>□ 阅读团队 `CLAUDE.md` 文件（从根开始，然后是特定服务）  </span></span>
<span class="line"><span>□ 设置开发环境  </span></span>
<span class="line"><span>□ 制作第一个 PR（人工编写，无 AI）</span></span></code></pre></div></figure>
<p><strong>第 2 周：引导 AI 协作</strong></p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span>□ 使用团队模板设置 Claude  </span></span>
<span class="line"><span>□ 在 AI 协助下完成"玩具问题"  </span></span>
<span class="line"><span>□ 练习提示模式  </span></span>
<span class="line"><span>□ 创建第一个 AI 辅助 PR（有监督）</span></span></code></pre></div></figure>
<p><strong>第 3 周：独立工作</strong></p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span>□ 发布第一个重要的 AI 辅助功能  </span></span>
<span class="line"><span>□ 为另一个开发者的 AI 输出编写测试  </span></span>
<span class="line"><span>□ 领导一个代码审查会话</span></span></code></pre></div></figure>
<h3 class="flex scroll-m-28 flex-row items-center gap-2" id="建立透明度文化"><a data-card="" href="#建立透明度文化" class="peer">建立透明度文化</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p>一个必要的文化转变：标准化 AI 协助的披露。我们不是试图隐藏我们使用 AI——我们试图负责任地使用它。每个包含 AI 工作的提交消息都被标记：</p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span># 我们的 .gitmessage 模板  </span></span>
<span class="line"><span># feat/fix/docs: &lt;描述&gt; [AI]?  </span></span>
<span class="line"><span>#  </span></span>
<span class="line"><span># [AI] - 重要的 AI 协助（&gt;50% 生成）  </span></span>
<span class="line"><span># [AI-minor] - 轻微的 AI 协助（&lt;50% 生成）  </span></span>
<span class="line"><span># [AI-review] - 仅用于代码审查的 AI  </span></span>
<span class="line"><span>#   </span></span>
<span class="line"><span># 示例：  </span></span>
<span class="line"><span># feat: 为用户服务添加 Redis 缓存 [AI]  </span></span>
<span class="line"><span>#  </span></span>
<span class="line"><span># AI 生成了缓存实现和 Redis 客户端设置。  </span></span>
<span class="line"><span># 我设计了缓存键结构并编写了所有测试。  </span></span>
<span class="line"><span># 手动验证缓存失效逻辑工作正常。</span></span></code></pre></div></figure>
<p>这种透明度服务于多个目的：</p>
<ol>
<li>审查者知道要特别注意</li>
<li>未来的调试者理解代码的来源</li>
<li>没有人对使用可用工具感到羞耻</li>
</ol>
<p>创建一个开发者可以有效地利用 AI 的环境，没有恐惧或羞耻，是建立高绩效文化的一部分。</p>
<h2 class="flex scroll-m-28 flex-row items-center gap-2" id="claude-永远不应该碰的东西刻在石头上"><a data-card="" href="#claude-永远不应该碰的东西刻在石头上" class="peer">Claude 永远不应该碰的东西（刻在石头上）</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h2>
<p>让我们对边界非常清楚。这些不是建议——它们是戒律。违反它们会带来危险。</p>
<h3 class="flex scroll-m-28 flex-row items-center gap-2" id="神圣的永不触碰清单"><a data-card="" href="#神圣的永不触碰清单" class="peer">神圣的永不触碰清单</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p><strong>❌ 测试文件</strong></p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># 这是神圣的土地  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># 没有 AI 可以通过  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> test_critical_business_logic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">():  </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    """这个测试编码了价值 1000 万美元的领域知识"""</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    pass</span></span></code></pre></div></figure>
<p>测试编码人类理解。它们是你的安全网、你的规范、你积累的智慧。当 Claude 编写测试时，它只是验证代码做了代码做的事情——而不是它应该做的事情。</p>
<p><strong>❌ 数据库迁移</strong></p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">-- migrations/2024_01_15_restructure_users.sql  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">-- 不要让 AI 碰这个  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">-- 一个错误的举动 = 数据丢失 = 职业生涯丢失  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> users </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">ADD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> COLUMN subscription_tier </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">UPDATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> users </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> subscription_tier </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'free'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> subscription_tier </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">IS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> users </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">ALTER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> COLUMN subscription_tier </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">SET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span></code></pre></div></figure>
<p>迁移在生产中是不可逆的。它们需要理解数据模式、部署时间和回滚策略，这是 AI 无法掌握的。</p>
<p><strong>❌ 安全关键代码</strong></p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># auth/jwt_validator.py  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># 仅限人类眼睛 - 安全边界  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> validate_token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(token: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) -&gt; Optional[UserClaims]:  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # 这里的每一行都经过安全审查  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # 更改需要安全团队批准  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # AI 建议在这里主动危险</span></span></code></pre></div></figure>
<p><strong>❌ 没有版本控制的 API 合约</strong></p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># openapi.yaml  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># 破坏这个 = 破坏每个客户端  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># AI 不理解移动应用发布周期  </span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">paths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:  </span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  /api/v1/users/{id}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:  </span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:  </span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      responses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:  </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:  </span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:  </span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">            $ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'#/definitions/UserResponse'</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  # 冻结直到 v2</span></span></code></pre></div></figure>
<p><strong>❌ 配置和秘密</strong></p>
<figure dir="ltr" class="my-4 rounded-xl bg-fd-card p-1 shiki relative border outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-1 right-1 z-2 bg-fd-card rounded-bl-lg border-l border-b text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-3.5" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div class="bg-fd-secondary rounded-lg border text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># config/production.py  </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">DATABASE_URL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> os.environ[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"DATABASE_URL"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># 永远不要硬编码  </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">STRIPE_SECRET_KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> os.environ[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"STRIPE_SECRET_KEY"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># 显然  </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">FEATURE_FLAGS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {  </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    "new_pricing"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># 需要产品决策  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre></div></figure>
<h3 class="flex scroll-m-28 flex-row items-center gap-2" id="ai-错误的层次结构"><a data-card="" href="#ai-错误的层次结构" class="peer">AI 错误的层次结构</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p>并非所有 AI 错误都相等。以下是我们如何分类它们：</p>
<p><strong>第 1 级：烦人但无害</strong></p>
<ul>
<li>错误的格式化（你的 linter 会捕获）</li>
<li>冗长的代码（稍后重构）</li>
<li>次优算法（分析会揭示）</li>
</ul>
<p><strong>第 2 级：修复昂贵</strong></p>
<ul>
<li>破坏内部 API（需要协调）</li>
<li>改变既定模式（混淆团队）</li>
<li>添加不必要的依赖（膨胀）</li>
</ul>
<p><strong>第 3 级：限制职业生涯</strong></p>
<ul>
<li>修改测试以使其通过</li>
<li>破坏 API 合约</li>
<li>泄露秘密或 PII</li>
<li>破坏数据迁移</li>
</ul>
<p>你的防护措施应该与错误级别成比例。第 1 级错误教导初级开发者。第 3 级错误教导你更新 LinkedIn。</p>
<h2 class="flex scroll-m-28 flex-row items-center gap-2" id="开发的未来走向何方"><a data-card="" href="#开发的未来走向何方" class="peer">开发的未来：走向何方</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h2>
<p>当我写这篇文章时是 2025 年，我们正处于 AI 辅助开发的尴尬青春期。工具强大但笨拙，就像一个刚经历生长突增的青少年。但轨迹是明确的，而且正在加速。</p>
<p>良好的文档是成功实施 DevOps 能力的基础。表现出色的团队将是那些将文档视为代码、以与测试套件相同的严格性维护 <code>CLAUDE.md</code> 文件的团队。</p>
<p>我看到即将到来的东西（~大致按到达顺序）：</p>
<ul>
<li>主动建议改进而不需要提示的 AI</li>
<li>学习你团队模式和偏好的 AI</li>
<li>跨会话和项目的持久记忆</li>
<li>理解整个代码库而不仅仅是文件的 AI</li>
</ul>
<p>但即使能力扩展，基础仍然存在：人类设定方向，AI 提供杠杆。我们是工具使用者，这些只是我们创造的最强大的工具。</p>
<h2 class="flex scroll-m-28 flex-row items-center gap-2" id="底线从这里开始今天开始"><a data-card="" href="#底线从这里开始今天开始" class="peer">底线：从这里开始，今天开始</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h2>
<p>如果你已经读到这里，你可能感到兴奋和恐惧的混合。这是正确的反应。AI 辅助开发很强大，但需要纪律和意图。</p>
<p>这是你的行动计划：</p>
<p><strong>今天：</strong></p>
<ol>
<li>为你当前项目创建一个 <code>CLAUDE.md</code></li>
<li>自己为你最棘手的代码添加三个锚点注释</li>
<li>尝试一个具有适当边界的 AI 辅助功能</li>
</ol>
<p><strong>本周：</strong></p>
<ol>
<li>与你的团队建立 AI 提交消息约定</li>
<li>与初级开发者运行 AI 辅助编码会话</li>
<li>为一段 AI 生成的代码编写测试</li>
</ol>
<p><strong>本月：</strong></p>
<ol>
<li>测量采用 AI 前后的部署频率</li>
<li>为常见任务创建提示模式库</li>
<li>运行关于 AI 辅助开发的团队回顾</li>
</ol>
<p>最重要的事情？开始。从小开始，谨慎开始，但要开始。掌握这个工作流的开发者不一定更聪明或更有才华——他们只是更早开始并从更多错误中学习的人。</p>
<p>软件交付性能预测组织性能。在一个速度和质量决定成功的行业中，AI 协助不是锦上添花——它是竞争必需品。但只有在你做得对的情况下。</p>
<p>Vibe-coding，尽管名字有趣，但这是严肃的业务。这是思考软件开发的新方式，它放大人类能力而不是替代它们。掌握它，你将比以往想象的更快地发布更好的软件。忽略它，你会看着竞争对手在你还在输入样板代码时超越你。</p>
<p>工具在这里。模式已证明。唯一的问题是：你将是指挥管弦乐队，还是仍然自己演奏每一种乐器？</p>
<h3 class="flex scroll-m-28 flex-row items-center gap-2" id="准备深入开始资源"><a data-card="" href="#准备深入开始资源" class="peer">准备深入？开始资源：</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p>📄 <strong>我们经过战斗测试的 <code>CLAUDE.md</code> 模板：</strong><br>
<a href="https://github.com/julep-ai/julep/blob/main/AGENTS.md" rel="noreferrer noopener" target="_blank">github.com/julep-ai/julep/blob/main/AGENTS.md</a></p>
<p>🤝 <strong>问题？在 Twitter 上找到我：</strong> <a href="https://twitter.com/diwanksingh" rel="noreferrer noopener" target="_blank">@diwanksingh</a></p>
<p>💬 <strong>加入讨论：</strong> 分享你自己的模式和学习</p>
<p>📚 <strong>推荐阅读：</strong></p>
<ul>
<li>Peter Senge – <em>第五项修炼</em> (2010)</li>
<li><em><a href="https://addyo.substack.com/p/future-proofing-your-software-engineering?utm_source=chatgpt.com" rel="noreferrer noopener" target="_blank">"超越 70%：最大化 AI 辅助编码中的人类 30%"</a></em> (2025 年 3 月 13 日) – Addy Osmani</li>
<li>Mark Richards &amp; Neal Ford – <em><a href="https://books.google.com/books/about/Fundamentals_of_Software_Architecture.html" rel="noreferrer noopener" target="_blank">软件架构基础</a></em>，第 2 版 (2025)</li>
<li>Nicole Forsgren, Jez Humble, Gene Kim - <em><a href="https://itrevolution.com/product/accelerate/" rel="noreferrer noopener" target="_blank">加速：精益软件和 DevOps 的科学</a></em></li>
</ul>
<p><strong>记住</strong>：完美是已发布产品的敌人。从一个小项目开始，建立你的边界，然后迭代。开发的未来在这里——只是分布不均匀。</p>
<blockquote>
<p>成为分布的一部分。</p>
</blockquote>
<hr>
<h2 class="flex scroll-m-28 flex-row items-center gap-2" id="来源和致谢"><a data-card="" href="#来源和致谢" class="peer">来源和致谢</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h2>
<p>本文基于 Diwank Singh 的原创文章 <a href="https://diwank.space/field-notes-from-shipping-real-code-with-claude" rel="noreferrer noopener" target="_blank">Field Notes From Shipping Real Code With Claude</a> 进行扩展和本地化。</p>
<p><strong>原作者</strong>: Diwank Singh<br>
<strong>原始链接</strong>: <a href="https://diwank.space/field-notes-from-shipping-real-code-with-claude" rel="noreferrer noopener" target="_blank">https://diwank.space/field-notes-from-shipping-real-code-with-claude</a><br>
<strong>发布日期</strong>: 2025年6月7日</p>
<p>感谢 Diwank Singh 分享这些宝贵的 AI 辅助开发实践经验。本文保留了所有技术细节、代码示例和最佳实践说明，同时进行了适当的格式优化和图片本地化处理。</p></div><div role="none" class="flex-1"></div><div class="flex flex-row flex-wrap items-center justify-between gap-4 empty:hidden"></div><div class="@container grid gap-4 pb-6 grid-cols-2"><a class="flex flex-col gap-2 rounded-lg border p-4 text-sm transition-colors hover:bg-fd-accent/80 hover:text-fd-accent-foreground @max-lg:col-span-full" href="/docs/zh/best-practices/claude-code-setup-tips"><div class="inline-flex items-center gap-1.5 font-medium"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide -mx-1 size-4 shrink-0 rtl:rotate-180"><path d="m15 18-6-6 6-6"></path></svg><p>掌握 Claude Code 的 33 个必知设置技巧</p></div><p class="text-fd-muted-foreground truncate">通过 33 个基础到高级的技巧全面掌握 Claude Code，涵盖快捷键、提示技巧、MCP 服务器、项目规则和自动化钩子。从新手到专家级生产力的完整指南。</p></a><a class="flex flex-col gap-2 rounded-lg border p-4 text-sm transition-colors hover:bg-fd-accent/80 hover:text-fd-accent-foreground @max-lg:col-span-full text-end" href="/docs/zh/best-practices/how-i-use-claude-code"><div class="inline-flex items-center gap-1.5 font-medium flex-row-reverse"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide -mx-1 size-4 shrink-0 rtl:rotate-180"><path d="m9 18 6-6-6-6"></path></svg><p>我如何使用 Claude Code</p></div><p class="text-fd-muted-foreground truncate">一份关于有效 Claude Code 使用模式的综合指南，从线程管理到 MCP 服务器、规划模式和 AI 辅助开发的生产力技巧。</p></a></div></article><div id="nd-toc" class="sticky pb-2 pt-12 max-xl:hidden" style="top:calc(var(--fd-banner-height) + var(--fd-nav-height));height:calc(100dvh - var(--fd-banner-height) - var(--fd-nav-height))"><div class="flex h-full w-(--fd-toc-width) max-w-full flex-col pe-4"><h3 class="inline-flex items-center gap-1.5 text-sm text-fd-muted-foreground"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-4"><path d="M15 18H3"></path><path d="M17 6H3"></path><path d="M21 12H3"></path></svg>On this page</h3><div class="relative min-h-0 text-sm ms-px overflow-auto [scrollbar-width:none] [mask-image:linear-gradient(to_bottom,transparent,white_16px,white_calc(100%-16px),transparent)] py-3"><div role="none" class="absolute top-(--fd-top) h-(--fd-height) w-px bg-fd-primary transition-all" style="--fd-top: 12px; --fd-height: 20px;"></div><div class="flex flex-col border-s border-fd-foreground/10"><a data-active="true" href="#使用-claude-生产真实代码的实战笔记" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-3">使用 Claude 生产真实代码的实战笔记</a><a data-active="false" href="#vibe-coding-不仅仅是一种感觉" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-3">Vibe Coding 不仅仅是一种感觉</a><a data-active="false" href="#你将学到什么" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-6">你将学到什么</a><a data-active="false" href="#这篇文章存在的原因从梗到方法" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-3">这篇文章存在的原因：从梗到方法</a><a data-active="false" href="#理解-vibe-coding" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-3">理解 Vibe-Coding</a><a data-active="false" href="#vibe-coding-的三种模式实用框架" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-3">Vibe-Coding 的三种模式：实用框架</a><a data-active="false" href="#模式-1游乐场" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-6">模式 1：<em>游乐场</em></a><a data-active="false" href="#模式-2结对编程" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-6">模式 2：<em>结对编程</em></a><a data-active="false" href="#模式-3生产单体仓库规模" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-6">模式 3：<em>生产/单体仓库规模</em></a><a data-active="false" href="#基础设施可持续-ai-开发的基础" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-3">基础设施：可持续 AI 开发的基础</a><a data-active="false" href="#claudemd你的单一真相来源" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-6"><code>CLAUDE.md</code>：你的单一真相来源</a><a data-active="false" href="#ai-开发的-git-工作流" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-6">AI 开发的 Git 工作流</a><a data-active="false" href="#神圣规则人类编写测试" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-3">神圣规则：人类编写测试</a><a data-active="false" href="#不溺水地扩展token-经济学和上下文管理" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-3">不溺水地扩展：Token 经济学和上下文管理</a><a data-active="false" href="#新会话和心理模型" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-6">新会话和心理模型</a><a data-active="false" href="#案例研究在生产中发布结构化错误" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-3">案例研究：在生产中发布结构化错误</a><a data-active="false" href="#ai-时代的领导力和文化" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-3">AI 时代的领导力和文化</a><a data-active="false" href="#新的入职检查清单" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-6">新的入职检查清单</a><a data-active="false" href="#建立透明度文化" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-6">建立透明度文化</a><a data-active="false" href="#claude-永远不应该碰的东西刻在石头上" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-3">Claude 永远不应该碰的东西（刻在石头上）</a><a data-active="false" href="#神圣的永不触碰清单" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-6">神圣的永不触碰清单</a><a data-active="false" href="#ai-错误的层次结构" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-6">AI 错误的层次结构</a><a data-active="false" href="#开发的未来走向何方" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-3">开发的未来：走向何方</a><a data-active="false" href="#底线从这里开始今天开始" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-3">底线：从这里开始，今天开始</a><a data-active="false" href="#准备深入开始资源" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-6">准备深入？开始资源：</a><a data-active="false" href="#来源和致谢" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-3">来源和致谢</a></div></div></div></div></div><!--$--><!--/$-->