---
title: "Claude Code Router "
description: "å¼ºå¤§çš„ Claude Code è·¯ç”±å·¥å…·ï¼Œæ”¯æŒå¤šæ¨¡å‹æ™ºèƒ½è·¯ç”±å’Œæˆæœ¬ä¼˜åŒ–"
---
Claude Code Router æ˜¯ä¸€ä¸ªå¼ºå¤§çš„è·¯ç”±å·¥å…·ï¼Œå…è®¸æ‚¨ä»¥ Claude Code ä¸ºåŸºç¡€æ„å»ºç¼–ç åŸºç¡€è®¾æ–½ï¼ŒåŒæ—¶è®©æ‚¨å†³å®šå¦‚ä½•ä¸æ¨¡å‹äº¤äº’ï¼ŒåŒæ—¶äº«å— Anthropic çš„æ›´æ–°ã€‚
**GitHub**: [musistudio/claude-code-router](https://github.com/musistudio/claude-code-router)  
**Stars**: 10.3k+  
**License**: MIT
## [ğŸš€ æ ¸å¿ƒç‰¹æ€§](#-æ ¸å¿ƒç‰¹æ€§)
### [å¤šæ¨¡å‹æ™ºèƒ½è·¯ç”±](#å¤šæ¨¡å‹æ™ºèƒ½è·¯ç”±)
*   **æ™ºèƒ½è·¯ç”±**: æ ¹æ®ä»»åŠ¡ç±»å‹è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æ¨¡å‹
*   **æˆæœ¬ä¼˜åŒ–**: ä½¿ç”¨æ›´å°çš„æœ¬åœ°æ¨¡å‹å¤„ç†åå°ä»»åŠ¡
*   **é•¿ä¸Šä¸‹æ–‡å¤„ç†**: ä¸“é—¨å¤„ç†é•¿ä¸Šä¸‹æ–‡ä»»åŠ¡ï¼ˆ>60K tokensï¼‰
*   **æ¨ç†å¢å¼º**: ä¸ºæ¨ç†å¯†é›†å‹ä»»åŠ¡é€‰æ‹©ä¸“ç”¨æ¨¡å‹
### [å¤šæä¾›å•†æ”¯æŒ](#å¤šæä¾›å•†æ”¯æŒ)
*   **OpenAI**: å®Œæ•´çš„ OpenAI API æ”¯æŒ
*   **Anthropic**: åŸç”Ÿ Claude API æ”¯æŒ
*   **DeepSeek**: é€‚é… DeepSeek API
*   **Gemini**: æ”¯æŒ Google Gemini API
*   **OpenRouter**: å¤šæä¾›å•†è·¯ç”±æ”¯æŒ
*   **Groq**: é«˜æ€§èƒ½æ¨ç†æ”¯æŒ
### [è½¬æ¢å™¨ç³»ç»Ÿ](#è½¬æ¢å™¨ç³»ç»Ÿ)
*   **maxtoken**: è®¾ç½®ç‰¹å®šçš„ max\_tokens å€¼
*   **tooluse**: é€šè¿‡ tool\_choice ä¼˜åŒ–å·¥å…·ä½¿ç”¨
*   **reasoning**: å¤„ç† reasoning\_content å­—æ®µ
*   **sampling**: å¤„ç†æ¸©åº¦ã€top\_pã€top\_k ç­‰é‡‡æ ·å‚æ•°
*   **enhancetool**: ä¸ºå·¥å…·è°ƒç”¨å‚æ•°æ·»åŠ é”™è¯¯å®¹å¿å±‚
## [ğŸ“¦ å®‰è£…å’Œé…ç½®](#-å®‰è£…å’Œé…ç½®)
### [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
```
# å®‰è£…
bunx @musistudio/claude-code-router@latest
# åˆ›å»ºé…ç½®ç›®å½•
mkdir -p $HOME/.claude-code-router
# å¤åˆ¶ç¤ºä¾‹é…ç½®
cp config.example.json $HOME/.claude-code-router/config.json
```
### [åŸºç¡€é…ç½®](#åŸºç¡€é…ç½®)
```
{
  "log": true,
  "OPENAI_API_KEY": "your-api-key",
  "OPENAI_BASE_URL": "https://api.deepseek.com",
  "OPENAI_MODEL": "deepseek-chat",
  "router": {
    "default": "openrouter,anthropic/claude-3.5-sonnet",
    "background": "openrouter,anthropic/claude-3-haiku",
    "think": "openrouter,anthropic/claude-3.5-sonnet",
    "longContext": "openrouter,anthropic/claude-3.5-sonnet",
    "longContextThreshold": 60000
  }
}
```
## [ğŸ”§ è·¯ç”±é…ç½®](#-è·¯ç”±é…ç½®)
### [é»˜è®¤è·¯ç”±åœºæ™¯](#é»˜è®¤è·¯ç”±åœºæ™¯)
```
{
  "router": {
    "default": "openrouter,anthropic/claude-3.5-sonnet",
    "background": "openrouter,anthropic/claude-3-haiku",
    "think": "openrouter,anthropic/claude-3.5-sonnet",
    "longContext": "openrouter,anthropic/claude-3.5-sonnet",
    "webSearch": "openrouter,anthropic/claude-3.5-sonnet:online"
  }
}
```
### [åŠ¨æ€æ¨¡å‹åˆ‡æ¢](#åŠ¨æ€æ¨¡å‹åˆ‡æ¢)
åœ¨ Claude Code ä¸­ä½¿ç”¨ `/model` å‘½ä»¤åŠ¨æ€åˆ‡æ¢æ¨¡å‹ï¼š
```
/model openrouter,anthropic/claude-3.5-sonnet
```
## [âš¡ é«˜çº§åŠŸèƒ½](#-é«˜çº§åŠŸèƒ½)
### [è‡ªå®šä¹‰è·¯ç”±å™¨](#è‡ªå®šä¹‰è·¯ç”±å™¨)
åˆ›å»ºè‡ªå®šä¹‰è·¯ç”±é€»è¾‘ï¼š
```
// $HOME/.claude-code-router/custom-router.js
module.exports = async function router(req, config) {
  const userMessage = req.body.messages.find((m) => m.role === "user")?.content;
  if (userMessage && userMessage.includes("explain this code")) {
    return "openrouter,anthropic/claude-3.5-sonnet";
  }
  return null; // å›é€€åˆ°é»˜è®¤è·¯ç”±å™¨
};
```
### [å­ä»£ç†è·¯ç”±](#å­ä»£ç†è·¯ç”±)
åœ¨å­ä»£ç†æç¤ºå¼€å¤´æŒ‡å®šç‰¹å®šæ¨¡å‹ï¼š
```
<CCR-SUBAGENT-MODEL>openrouter,anthropic/claude-3.5-sonnet</CCR-SUBAGENT-MODEL>
è¯·å¸®æˆ‘åˆ†æè¿™æ®µä»£ç çš„æ½œåœ¨ä¼˜åŒ–...
```
### [GitHub Actions é›†æˆ](#github-actions-é›†æˆ)
åœ¨ CI/CD ç®¡é“ä¸­é›†æˆ Claude Code Routerï¼š
```
name: Claude Code
on:
  issue_comment:
    types: [created]
jobs:
  claude:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      - name: Prepare Environment
        run: |
          curl -fsSL https://bun.sh/install | bash
          mkdir -p $HOME/.claude-code-router
          cat << 'EOF' > $HOME/.claude-code-router/config.json
          {
            "log": true,
            "OPENAI_API_KEY": "${{ secrets.OPENAI_API_KEY }}",
            "OPENAI_BASE_URL": "https://api.deepseek.com",
            "OPENAI_MODEL": "deepseek-chat"
          }
          EOF
      - name: Start Claude Code Router
        run: |
          nohup ~/.bun/bin/bunx @musistudio/claude-code-router@1.0.8 start &
      - name: Run Claude Code
        uses: anthropics/claude-code-action@beta
        env:
          ANTHROPIC_BASE_URL: http://localhost:3456
        with:
          anthropic_api_key: "any-string-is-ok"
```
## [ğŸ¯ ä½¿ç”¨åœºæ™¯](#-ä½¿ç”¨åœºæ™¯)
### [1\. æˆæœ¬ä¼˜åŒ–](#1-æˆæœ¬ä¼˜åŒ–)
*   ä½¿ç”¨è¾ƒå°çš„æ¨¡å‹å¤„ç†ç®€å•ä»»åŠ¡
*   åœ¨éé«˜å³°æ—¶æ®µè¿è¡Œä»»åŠ¡
*   æ™ºèƒ½è·¯ç”±å‡å°‘ API è°ƒç”¨æˆæœ¬
### [2\. æ€§èƒ½ä¼˜åŒ–](#2-æ€§èƒ½ä¼˜åŒ–)
*   é•¿ä¸Šä¸‹æ–‡ä»»åŠ¡ä½¿ç”¨ä¸“ç”¨æ¨¡å‹
*   æ¨ç†ä»»åŠ¡ä½¿ç”¨é«˜æ€§èƒ½æ¨¡å‹
*   åå°ä»»åŠ¡ä½¿ç”¨è½»é‡çº§æ¨¡å‹
### [3\. å¤šæä¾›å•†æ”¯æŒ](#3-å¤šæä¾›å•†æ”¯æŒ)
*   é¿å…å•ä¸€æä¾›å•†é™åˆ¶
*   åˆ©ç”¨ä¸åŒæä¾›å•†çš„ä¼˜åŠ¿
*   æé«˜æœåŠ¡å¯ç”¨æ€§
## [ğŸ’¡ æœ€ä½³å®è·µ](#-æœ€ä½³å®è·µ)
### [é…ç½®å»ºè®®](#é…ç½®å»ºè®®)
1.  **åˆç†è®¾ç½®é˜ˆå€¼**: æ ¹æ®é¡¹ç›®éœ€æ±‚è°ƒæ•´ longContextThreshold
2.  **ç›‘æ§ä½¿ç”¨æƒ…å†µ**: å¯ç”¨æ—¥å¿—è®°å½•ç›‘æ§æ¨¡å‹ä½¿ç”¨
3.  **å®šæœŸæ›´æ–°**: ä¿æŒå·¥å…·å’Œé…ç½®çš„æœ€æ–°çŠ¶æ€
4.  **æµ‹è¯•é…ç½®**: åœ¨ç”Ÿäº§ç¯å¢ƒå‰å……åˆ†æµ‹è¯•é…ç½®
### [å®‰å…¨è€ƒè™‘](#å®‰å…¨è€ƒè™‘)
1.  **API å¯†é’¥ç®¡ç†**: ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯
2.  **è®¿é—®æ§åˆ¶**: é™åˆ¶è·¯ç”±å™¨çš„è®¿é—®æƒé™
3.  **æ—¥å¿—å®‰å…¨**: é¿å…åœ¨æ—¥å¿—ä¸­è®°å½•æ•æ„Ÿä¿¡æ¯

## [ğŸ“ æ€»ç»“](#-æ€»ç»“)
Claude Code Router ä¸º Claude Code æä¾›äº†å¼ºå¤§çš„è·¯ç”±èƒ½åŠ›ï¼Œè®©æ‚¨èƒ½å¤Ÿï¼š
*   **çµæ´»é€‰æ‹©æ¨¡å‹**: æ ¹æ®ä»»åŠ¡éœ€æ±‚é€‰æ‹©åˆé€‚çš„ AI æ¨¡å‹
*   **ä¼˜åŒ–æˆæœ¬**: é€šè¿‡æ™ºèƒ½è·¯ç”±é™ä½ API è°ƒç”¨æˆæœ¬
*   **æå‡æ€§èƒ½**: ä¸ºä¸åŒä»»åŠ¡ç±»å‹é€‰æ‹©æœ€ä¼˜æ¨¡å‹
*   **å¢å¼ºå¯ç”¨æ€§**: æ”¯æŒå¤šç§ AI æä¾›å•†ï¼Œé¿å…å•ç‚¹æ•…éšœ
è¿™ä¸ªå·¥å…·ç‰¹åˆ«é€‚åˆéœ€è¦å¤„ç†å¤§é‡ AI äº¤äº’çš„å›¢é˜Ÿå’Œä¸ªäººå¼€å‘è€…ï¼Œèƒ½å¤Ÿæ˜¾è‘—æå‡å¼€å‘æ•ˆç‡å’Œæˆæœ¬æ•ˆç›Šã€‚
* * *
_Claude Code Router æ˜¯ Claude Code ç”Ÿæ€ç³»ç»Ÿä¸­ä¸å¯æˆ–ç¼ºçš„å·¥å…·ï¼Œä¸ºå¼€å‘è€…æä¾›äº†çµæ´»ã€é«˜æ•ˆã€ç»æµçš„ AI æ¨¡å‹è·¯ç”±è§£å†³æ–¹æ¡ˆã€‚_
- [CCPMï¼šClaude Code é¡¹ç›®ç®¡ç†å™¨](/docs/tools/ccpm-project-manager) - ä¸€ä¸ªé©å‘½æ€§çš„ Claude Code é¡¹ç›®ç®¡ç†ç³»ç»Ÿï¼Œä½¿ç”¨ GitHub Issues å’Œ Git worktrees å®ç°å¹¶è¡Œä»£ç†æ‰§è¡Œã€‚å°† PRD è½¬åŒ–ä¸ºå·²å‘å¸ƒçš„ä»£ç ï¼Œå…·å¤‡å®Œæ•´çš„å¯è¿½æº¯æ€§å’Œå‰æ‰€æœªæœ‰çš„å¼€å‘é€Ÿåº¦ã€‚
- [Claude Code Templates: é…ç½®å’Œç›‘æ§ Claude Code çš„ CLI å·¥å…·](/docs/tools/claude-code-templates) - ä¸€ä¸ªå…¨é¢çš„ CLI å·¥å…·ï¼Œç”¨äºé…ç½®å’Œç›‘æ§ Claude Codeï¼Œå…·æœ‰æ¡†æ¶ç‰¹å®šå‘½ä»¤ã€å®æ—¶åˆ†æä»ªè¡¨æ¿å’Œç‹¬ç«‹ç»„ä»¶å®‰è£…åŠŸèƒ½ã€‚
